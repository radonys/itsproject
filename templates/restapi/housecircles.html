<!doctype html>
<html>
  <head>
<link href="https://developers.google.com/fusiontables/docs/samples/style/default.css" rel="stylesheet" type="text/css">
    <style>
      #map {
        width: 800px;
        height: 800px;
      }
#legend {
        background: #FFF;
        padding: 10px;
        margin: 5px;
        font-size: 12px;
        font-family: Arial, sans-serif;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
{% load staticfiles %}
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="{% static "gmaps.js" %}"></script>
    <script>
data=JSON.parse('{{ data|safe}}');//[[48.8577262,2.2928475],[48.8576973,2.292387],[48.8575015,2.2912906]]
      var map = new GMaps({
        el: '#map',
        lat: data[0]["Houses"][0].point.coordinates[1],
        lng: data[0]["Houses"][0].point.coordinates[0]
      });
for(x=0;x<Object.keys(data).length;x++)
{
var contentInfo="Income: "+(data[x]["Houses"][0].income).toString()+"<br>";
for(j=0;j<data[x]["Members"].length;j++){
contentInfo+=data[x]["Members"][j].Name+", "+data[x]["Members"][j].Age+", "+data[x]["Members"][j].Gender+"<br>";
}
for(j=0;j<data[x]["Photos"].length;j++){
contentInfo+="<img src='http://10.0.3.23:8003"+data[x]["Photos"][j].file+"' height='200' width='200'>";
}
console.log(data[0]["Houses"][0].point.coordinates[1]);
console.log(data[0]["Houses"][0].point.coordinates[0]);

for (i = 0; i < data[x]["Houses"].length; i++) {
    map.drawCircle({
  lat: data[x]["Houses"][i].point.coordinates[1],
  lng: data[x]["Houses"][i].point.coordinates[0],
  radius:100,
  fillColor: 'red',
  fillOpacity: 0.5,
  strokeWeight: 0,
});}



console.log(map);
}

    </script>
  </body>
</html>
